
# 2. ConstReg
![Waveform](https://velog.velcdn.com/images/foodinsect/post/d2975941-fc1a-4e6f-9904-de035223740b/image.png)

---

## 개요

`ConstReg` 모듈은 FPGA 내부에 상수 값을 저장하고, **읽기(Read)** 요청에 따라 상수 값을 반환하는 기능을 제공한다. 이 모듈은 특정 주소에 미리 정의된 상수 값을 저장하며, 외부에서 해당 주소로 접근하여 값을 읽을 수 있다. **3개의 고정 상수**를 저장할 수 있으며, 각 상수는 서로 다른 주소에 할당되어 있다.

---
![2번](https://velog.velcdn.com/images/foodinsect/post/bd48e2f1-05ca-4406-9800-79b7af7c8d61/image.png)


## 모듈 동작 원리


### 1. **상수 값 저장 및 주소 할당**

`ConstReg` 모듈은 3개의 상수 값을 저장하며, 각각의 상수는 특정 주소에 할당된다.

- **ID_VER1**: `32'h0123_4567` - 주소 `32'h0200_0100`에 할당된 첫 번째 상수.
- **ID_VER2**: `32'h89AB_CDEF` - 주소 `32'h0200_0104`에 할당된 두 번째 상수.
- **ID_VER3**: `32'hFEDC_BA98` - 주소 `32'h0200_0108`에 할당된 세 번째 상수.

마스터가 특정 주소를 통해 읽기 요청을 보내면, 모듈은 해당 주소에 할당된 상수 값을 반환한다.

---

### 2. **주소 디코딩 (Address Decoding)**

모듈은 세 개의 주소(`32'h0200_0100`, `32'h0200_0104`, `32'h0200_0108`) 중 하나와 일치하는지 확인하기 위해 **주소 디코딩**을 수행한다.

- **wSel1**: 입력 주소(`iADR`)가 `32'h0200_0100`과 일치하면 High가 된다. 이때, 상수 값 `ID_VER1`이 선택된다.
- **wSel2**: 입력 주소가 `32'h0200_0104`과 일치하면 High가 된다. 이때, 상수 값 `ID_VER2`이 선택된다.
- **wSel3**: 입력 주소가 `32'h0200_0108`과 일치하면 High가 된다. 이때, 상수 값 `ID_VER3`이 선택된다.

---

### 3. **데이터 출력 (Data Output)**

모듈은 요청된 주소에 따라 **상수 값**을 출력한다. 만약 요청된 주소가 `32'h0200_0100`, `32'h0200_0104`, `32'h0200_0108` 중 하나와 일치하지 않으면, `oDAT` 신호는 **High Impedance** 상태(`32'hzzzzzzzz`)로 설정된다. 이는 잘못된 주소 요청에 대해 데이터를 반환하지 않도록 하는 보호 메커니즘이다.

- `wSel1`이 High일 경우 `ID_VER1`을 출력.
- `wSel2`이 High일 경우 `ID_VER2`을 출력.
- `wSel3`이 High일 경우 `ID_VER3`을 출력.
- 그 외의 경우 **High Impedance**(`32'hzzzzzzzz`)로 출력.

---

### 4. **응답 신호 (Acknowledge Signal)**

모듈은 `oACK` 신호를 통해 마스터에 요청이 성공적으로 처리되었음을 알린다.  
`oACK`는 주소 디코딩 신호(`wSel1`, `wSel2`, `wSel3`) 중 하나라도 High일 경우 활성화되며, 이는 해당 주소의 상수가 성공적으로 선택되었음을 의미한다.

---

## 활용 예시

이 모듈은 FPGA 또는 SoC 시스템에서 **고정된 상수 값**을 외부에서 접근할 수 있도록 할 때 유용한다. 예를 들어, 프로세서가 특정 버전 번호 또는 고유 식별 번호를 필요로 할 때, 이 모듈을 통해 해당 상수 값을 읽을 수 있다.

---

## 요약

- **ConstReg** 모듈은 세 개의 고정 상수 값을 지정된 주소에서 읽을 수 있도록 하는 기능을 제공한다.
- **Strobe 신호(iSTB)**와 **주소 디코딩**을 통해 특정 주소에 접근하며, 접근이 성공하면 해당 상수 값을 **oDAT**에 출력하고, **Acknowledge 신호(oACK)**를 통해 요청이 처리되었음을 알린다.
- 주소가 유효하지 않으면 **High Impedance** 상태로 응답을 차단한다.

이 모듈은 **ID 레지스터** 또는 **버전 레지스터**와 같은 용도로 사용할 수 있으며, FPGA 또는 SoC 설계에서 자주 활용된다.

---
